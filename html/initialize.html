<!doctype html><html>	<head>		<meta charset="utf-8">		<title>简单的jquery进度条</title>		<link type="text/css" href="../css/style.css" rel="stylesheet" />		<script type="text/javascript" src="../js/jquery.js"></script>		<script type="text/javascript" src="../js/jquery.event.drag.js"></script>		<script type="text/javascript" src="../js/jquery.touchSlider.js"></script>		<script src="../pjs/common.js"></script>		<script src="../pjs/com_sqlite.js"></script>		<script src="layer/layer.js"></script>		<style>			.mui-content {				background: url(../img/lgbj.jpg) bottom center no-repeat #efeff4;				background-size: 100% 100%;				width: 100%;				height: 100%;			}		</style>	</head>	<body class="mui-content">		<script>			//检查系统更新			var i = 0;			/*add——创建tbx下的div加文字和变宽度的方法*/			function add(i) {				var tbox = $(".tbox");				var tiao = $(".tiao");				tiao.css("width", i + "%").html(i + "%");			}			/*创建方法（i++循环起来）*/			function xh() {				$(".ok").html("检查系统更新。").fadeIn("slow");				if(i >= 100) {					$(".ok").html("加载完成").fadeIn("slow");					insertfilrp();					//					return;				}				if(i <= 100) {					setTimeout("xh()", 10)					add(i);					i++;				}			}			/*调用xh()函数*/			$(document).ready(function() {				$(".ok").html("检查系统数据。。。").fadeIn("slow");								xh();			});			function insertfilrp() {				$(".ok").html("检查系统数据。。。").fadeIn("slow");				//检查是否需要初始化系统				db.transaction(function(tx) {					tx.executeSql("select * from IOT_USER_ORGANIZATION", [], function(tx, result) {						jump('login.html');					}, function onError(tx, error) {						$(".ok").html("系统初始化。。。").fadeIn("slow");						datasync();					});				});			}			//下载初始化数据			var bool = false;			function datasync() {				console.log(url + "app/ceslj")				$(".ok").html(url + "app/ceslj").fadeIn("slow");				//	mui.alert('开始初始化系统！', '系統初始化', function() {				$.post(url + "app/ceslj", null, function(rest) {					bool = true;				});				layer.msg("服务器连接中...", {					time: 5000,					shade: 0.6,					success: function(layero, index) {						var msg = layero.text();						var i = 10;						var timer = null;						var fn = function() {							if(!i) {								layer.close(index);								clearInterval(timer);							} else if(bool) {								layer.close(index);								clearInterval(timer);							}							i--;						};						timer = setInterval(fn, 1000);						fn();					},				}, function() {					if(bool) {						lianji();					} else {						alert("连接失败，请检查网络状态，重新连接");					}					//这里写需要执行的				});				//	});			}			function lianji() {				$(".ok").html("获取初始数据。。。").fadeIn("slow");				//	console.log(url + "app/dowTableList")				$.post(url + "app/dowTableList", null, function(rest) {					var msg = rest.data;					$(".ok").html("数据写入中，请稍后。。。").fadeIn("slow");					$.each(msg.content, function(i, item) {						if(i == 'create') {							$.each(item, function(is, items) {								//创建数据表								criteSqllite_text(items);							});						} else if(i == 'insert') {							$.each(item, function(is, items) {								$.each(items, function(is2, items2) {									var inse = 'insert into ' + is + '(';									var a = '';									var b = '';									var c = '';									$.each(items2, function(is3, items3) {										a += c + is3;										b += c + "'" + items3 + "'";										c = ',';									});									inse += a + ') values (' + b + ')';									//写入数据库									criteSqllite_text(inse);								});							});						}					});				});			}			/**			 * 操作数据库			 */			var number = 0;			var numbers = 0;			function criteSqllite_text(sql) {				number++;				//查找数据				db.transaction(function(tx) {					tx.executeSql(sql, [], function(tx, result) {						numbers++;						var nums = (numbers / number) * 100;						var num = nums.toFixed(2);						add(num);						if(numbers == number) {							jump('login.html');						}					}, function onError(tx, error) {						console.log(sql);						numbers++;						console.log(error.message);					});				});			}		</script>		<style>			html,			body {				width: 100%;				height: 100%			}						body {				background-image: URL(../img/lgbj.jpg);				background-position: center;				background-repeat: no-repeat;				background-attachment: fixed;				background-size: 100%;			}						.box {				position: absolute;				width: 400px;				height: 200px;				left: 50%;				top: 50%;				margin-left: -200px;				margin-top: -100px;			}						.ok {				width: 200px;				height: 100px;				margin: 0 auto;				text-align: center;				background: #999;				line-height: 100px;				color: #FFF;				display: none;			}						.tbox {				width: 397px;				height: 49px;				background: url(../img/bak.png) no-repeat;				margin-top: 20px;			}						.tbox div {				width: 0px;				height: 49px;				background: url(../img/pro.png) no-repeat;				text-align: center;				font-family: Tahoma;				font-size: 18px;				line-height: 48px;			}		</style>		<div class="box">			<div class="ok"></div>			<div class="tbox">				<div class="tiao"></div>			</div>		</div>	</body></html>